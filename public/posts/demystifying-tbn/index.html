<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Demystifying the TBN matrix :: 428 Magpies</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="" />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://kryzp.github.io/posts/demystifying-tbn/" />





  
  <link rel="stylesheet" href="https://kryzp.github.io/css/buttons.min.86f6b4c106b6c6eb690ae5203d36b442c1f66f718ff4e8164fa86cf6c61ad641.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/code.min.d529ea4b2fb8d34328d7d31afc5466d5f7bc2f0bc9abdd98b69385335d7baee4.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/fonts.min.5bb7ed13e1d00d8ff39ea84af26737007eb5051b157b86fc24487c94f3dc8bbe.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/footer.min.eb8dfc2c6a7eafa36cd3ba92d63e69e849e2200e0002a228d137f236b09ecd75.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/gist.min.a751e8b0abe1ba8bc53ced52a38b19d8950fe78ca29454ea8c2595cf26aad5c0.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/header.min.75c7eb0e2872d95ff48109c6647d0223a38db52e2561dd87966eb5fc7c6bdac6.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/main.min.36833afd348409fc6c3d09d0897c5833d9d5bf1ff31f5e60ea3ee42ce2b1268c.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/menu.min.3c17467ebeb3d38663dce68f71f519901124fa5cbb4519b2fb0667a21e9aca39.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/pagination.min.bbb986dbce00a5ce5aca0504b7925fc1c581992a4bf57f163e5d69cc1db7d836.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/post.min.e6dddd258e64c83e05cec0cd49c05216742d42fc8ecbfbe6b67083412b609bd3.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/syntax.min.a0773cce9310cb6d8ed23e50f005448facf29a53001b57e038828daa466b25c0.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/terminal.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css">

  
  <link rel="stylesheet" href="https://kryzp.github.io/css/terms.min.b81791663c3790e738e571cdbf802312390d30e4b1d8dc9d814a5b5454d0ac11.css">


<link rel="stylesheet" href="https://kryzp.github.io/terminal.css">




<link rel="shortcut icon" href="https://kryzp.github.io/favicon.png">
<link rel="apple-touch-icon" href="https://kryzp.github.io/apple-touch-icon.png">


<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Demystifying the TBN matrix">
<meta property="og:description" content="" />
<meta property="og:url" content="https://kryzp.github.io/posts/demystifying-tbn/" />
<meta property="og:site_name" content="428 Magpies" />

  <meta property="og:image" content="https://kryzp.github.io/og-image.png">

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2025-03-23 00:00:00 &#43;0000 UTC" />









<link rel="icon" href="/assets/favicon/favicon.svg">

<head>
	<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.css"
  integrity="sha384-WcoG4HRXMzYzfCgiyfrySxx90XSl2rxY5mnVY5TwtWE6KLrArNKn0T/mOgNL0Mmi"
  crossorigin="anonymous"
>

<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/katex.min.js"
  integrity="sha384-J+9dG2KMoiR9hqcFao0IBLwxt6zpcyN68IgwzsCSkbreXUjmNVRhPFTssqdSGjwQ"
  crossorigin="anonymous">
</script>

<script
  defer
  src="https://cdn.jsdelivr.net/npm/katex@0.16.25/dist/contrib/auto-render.min.js"
  integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh"
  crossorigin="anonymous"
  onload="renderMathInElement(document.body);">
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '$', right: '$', display: false },
      ],
      throwOnError : false
    });
  });
</script>

</head>


</head>
<body>


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    428 Magpies
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/projects">Projects</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about" >About</a></li>
        
      
        
          <li><a href="/projects" >Projects</a></li>
        
      
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://kryzp.github.io/posts/demystifying-tbn/">Demystifying the TBN matrix</a>
  </h1>
  <div class="post-meta"><time class="post-date">2025-03-23</time></div>

  
  


  

  <div class="post-content"><div>
        <p>If you&rsquo;ve ever done graphics programming, you&rsquo;ve likely implemented some sort of normal mapping. You will then know that it relies on something known as the <em>TBN matrix</em> to magically convert your tangent space normal map textures (the desaturated blue ones) into world space normals (the cooler rainbow ones) to be used in lighting. It was something that seemed really abstract to me when I first learned about it.</p>
<p>I mean, I kind of understood it, it was a matrix that moved us between two coordinate systems that meant that we could take our generic tangent space normal maps, and attach them to whatever surface we wanted.</p>
<p>That being said, I&rsquo;d be lying if that meant I actually had a proper picture for what it was.</p>
<p>If you know a little linear algebra you&rsquo;ll know that an $n$-dimensional matrix can be interpreted as a collection of $n$ column vectors which lay out something known as a &ldquo;basis&rdquo;. It&rsquo;s a way of writing what <em>their</em> coordinate system looks like, if you looked at it from the perspective of <em>your</em> coordinate system. If I move one unit along the $x$ axis in their coordinate system, what would that look like in my coordinate system?</p>
<p>Similarly, here we are creating a basis describing what the local &ldquo;tangent space&rdquo; looks like at the fragment that we are shading, if viewed from the perspective of world space. How much is one unit moving upwards in tangent space, in world space?</p>
<p>And that&rsquo;s really the way I think people should look at this matrix, it&rsquo;s a mathematical &lsquo;rosetta stone&rsquo;. It &ldquo;translates&rdquo; the alien tangent space language into our readable world space language. Of course, tangent space is pretty understandable, so I wouldn&rsquo;t go as far as to call it &lsquo;alien&rsquo;, but you get my point.</p>

<img src="/assets/img/tbn_sphere.png"  class="center"  style="border-width: 1px; width: 500px;"    />


<p>I want to stress now that there is a reason why model importers like <strong><a href="https://assimp.org/">Assimp</a></strong>, when told to <code>aiProcess_CalcTangentSpace</code>, generate all three components of the TBN matrix for each vertex. While yes, you can technically calculate the third component by just computing the cross product of the first two, this doesn&rsquo;t gurantee that the third component will point in the direction of increasing UV, which is a really useful property to have.</p>
<p>Finally, since the TBN matrix is <em>orthonormal</em> (all column vectors are of unit length and all of them are perpendicular to each other), its inverse is its transpose, so moving from and to tangent space is very cheap.</p>

      </div></div>

  
    
<div class="pagination">
  <div class="pagination__title">
    <span class="pagination__title-h">Read other posts</span>
    <hr />
  </div>
  <div class="pagination__buttons">
    
      <a href="https://kryzp.github.io/posts/victorian-trade-algorithm/" class="button inline prev">
        &lt; [<span class="button__text">Victorian-Era Trade Optimiser Algorithm</span>]
      </a>
    
    
      ::
    
    
      <a href="https://kryzp.github.io/posts/subsurface-parallax/" class="button inline next">
         [<span class="button__text">On Subsurface Parallax Shading</span>] &gt;
      </a>
    
  </div>
</div>


  

  
    

  
</article>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2026 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
